<div class="siliconflow-extension-settings">
    <!-- 硅基流动TTS插件 -->
    <div class="inline-drawer">
        <div class="inline-drawer-header inline-drawer-toggle">
            <b>硅基流动TTS</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down"></div>
        </div>
        <div class="inline-drawer-content" style="display: none;">

            <!-- API设置 - 可折叠 -->
            <div class="inline-drawer sub-drawer">
                <div class="inline-drawer-header inline-drawer-toggle">
                    <span><i class="fa-solid fa-key"></i> API设置</span>
                    <div class="inline-drawer-icon fa-solid fa-chevron-down"></div>
                </div>
                <div class="inline-drawer-content" style="display: none;">
                    <div class="setting-item">
                        <label for="siliconflow_api_key">API密钥：</label>
                        <input id="siliconflow_api_key" type="password" placeholder="输入你的硅基流动API密钥" />
                        <small>从 <a href="https://siliconflow.cn" target="_blank">硅基流动官网</a> 获取API密钥</small>
                    </div>

                    <div class="setting-item">
                        <label for="siliconflow_api_url">API地址：</label>
                        <input id="siliconflow_api_url" type="text" value="https://api.siliconflow.cn/v1" />
                    </div>

                    <div class="setting-item button-group">
                        <button id="test_siliconflow_connection" class="menu_button">测试连接</button>
                        <button id="save_siliconflow_settings" class="menu_button">保存设置</button>
                        <span id="connection_status" style="color: red;">未连接</span>
                    </div>
                </div>
            </div>

            <!-- 语音设置 - 可折叠 -->
            <div class="inline-drawer sub-drawer">
                <div class="inline-drawer-header inline-drawer-toggle">
                    <span><i class="fa-solid fa-sliders"></i> 语音设置</span>
                    <div class="inline-drawer-icon fa-solid fa-chevron-down"></div>
                </div>
                <div class="inline-drawer-content" style="display: none;">
                    <div class="setting-item">
                        <label for="tts_model">TTS模型：</label>
                        <select id="tts_model">
                            <option value="FunAudioLLM/CosyVoice2-0.5B">CosyVoice2-0.5B</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label for="tts_voice">语音角色：</label>
                        <select id="tts_voice">
                            <option value="alex">Alex (男声)</option>
                            <option value="anna">Anna (女声)</option>
                            <option value="bella">Bella (女声)</option>
                            <option value="benjamin">Benjamin (男声)</option>
                            <option value="charles">Charles (男声)</option>
                            <option value="claire">Claire (女声)</option>
                            <option value="david">David (男声)</option>
                            <option value="diana">Diana (女声)</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <label for="tts_speed">语速（0.25-4.0）：</label>
                        <input type="range" id="tts_speed" min="0.25" max="4" step="0.25" value="1" />
                        <span id="tts_speed_value">1.0</span>
                    </div>

                    <div class="setting-item">
                        <label for="tts_gain">音量增益（-10到10）：</label>
                        <input type="range" id="tts_gain" min="-10" max="10" step="1" value="0" />
                        <span id="tts_gain_value">0</span>
                    </div>
                </div>
            </div>

            <!-- 克隆音色 - 可折叠 -->
            <div class="inline-drawer sub-drawer">
                <div class="inline-drawer-header inline-drawer-toggle">
                    <span><i class="fa-solid fa-microphone"></i> 克隆音色</span>
                    <div class="inline-drawer-icon fa-solid fa-chevron-down"></div>
                </div>
                <div class="inline-drawer-content" style="display: none;">
                    <div class="setting-item">
                        <label for="clone_voice_name">音色名称：</label>
                        <input type="text" id="clone_voice_name" placeholder="例如: my_voice_1"
                            pattern="[a-zA-Z0-9_\-]+" />
                        <small>只能使用英文字母、数字、下划线和连字符</small>
                    </div>
                    <div class="setting-item">
                        <label for="clone_voice_text">参考文本：</label>
                        <input type="text" id="clone_voice_text" placeholder="输入音频对应的文本内容" />
                    </div>
                    <div class="setting-item">
                        <label for="clone_voice_audio">参考音频：</label>
                        <input type="file" id="clone_voice_audio" accept="audio/*" />
                        <small>支持mp3, wav格式，建议5-10秒清晰语音</small>
                    </div>
                    <div class="setting-item button-group">
                        <button id="upload_voice" class="menu_button">上传克隆</button>
                        <button id="refresh_custom_voices" class="menu_button">刷新列表</button>
                    </div>
                    <div class="setting-item">
                        <label>已克隆的音色：</label>
                        <div id="custom_voices_list" style="margin-top: 10px;">
                            <small>暂无自定义音色</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TTS测试 - 可折叠 -->
            <div class="inline-drawer sub-drawer">
                <div class="inline-drawer-header inline-drawer-toggle">
                    <span><i class="fa-solid fa-play"></i> TTS测试</span>
                    <div class="inline-drawer-icon fa-solid fa-chevron-down"></div>
                </div>
                <div class="inline-drawer-content" style="display: none;">
                    <div class="setting-item">
                        <textarea id="tts_test_text" placeholder="输入测试文本...">你好，这是一个测试语音。</textarea>
                        <button id="test_tts" class="menu_button">生成测试语音</button>
                        <div id="tts_output"></div>
                    </div>
                </div>
            </div>

            <!-- 使用说明 -->
            <div class="setting-item" style="margin-top: 10px;">
                <small style="color: var(--SmartThemeQuoteColor, #888);">
                    <i class="fa-solid fa-info-circle"></i>
                    每条消息旁会显示 <i class="fa-solid fa-volume-high"></i> 按钮，点击即可朗读。
                </small>
            </div>

        </div>
    </div>
</div>